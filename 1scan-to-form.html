<!DOCTYPE html>
<html>
<head>
  <title>Scan QR to Fill Google Form</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <h3>üì∑ ‡∏™‡πÅ‡∏Å‡∏ô QR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å Job No.</h3>
  <div id="reader" style="width:300px;"></div>

  <script>
    function extractJobNo(rawText) {
      // ‡∏î‡∏∂‡∏á‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÅ‡∏£‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å ||
      const firstLine = rawText.split('\n')[0];
      const jobNo = firstLine.split('||')[0];
      return jobNo.trim();
    }

    function onScanSuccess(decodedText) {
      const jobNo = extractJobNo(decodedText);
      const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLScVEHLH_YKSXYIaEracJkMwsIEywTR6JnFXV6NIunh5J8326Q/viewform?entry.2114696343=" + encodeURIComponent(jobNo);
      window.location.href = formUrl;
    }

    new Html5Qrcode("reader").start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      onScanSuccess
    );
  </script>
</body>
</html>
